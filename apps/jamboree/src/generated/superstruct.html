<pre class="shiki vitesse-dark twoslash lsp" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#4D9375">import</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> any</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that any value passes validation.</div></span>any</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> array</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>>(</span><span style="color:#BD976A">Element</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Infer</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>[],</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is an array and that its elements are of a specific type.

Note: If you omit the element struct, the arrays elements will not be
iterated at all. This can be helpful for cases where performance is critical,
and it is preferred to using `array(any())`.</div></span>array</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> assign</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> ObjectSchema</span><span style="color:#666666">,</span><span style="color:#5DA994"> B</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> ObjectSchema</span><span style="color:#666666">>(</span><span style="color:#BD976A">A</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">ObjectType</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#666666">>, </span><span style="color:#5DA994">A</span><span style="color:#666666">>,</span><span style="color:#BD976A"> B</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">ObjectType</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">B</span><span style="color:#666666">>, </span><span style="color:#5DA994">B</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">ObjectType</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Assign</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#666666">,</span><span style="color:#5DA994"> B</span><span style="color:#666666">>>,</span><span style="color:#5DA994"> Assign</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#666666">,</span><span style="color:#5DA994"> B</span><span style="color:#666666">>></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">3</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Create a new struct that combines the properties properties from multiple
object or type structs. Its return type will match the first parameter's type.

Like JavaScript's `Object.assign` utility.</div></span>assign</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> coerce</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666">,</span><span style="color:#5DA994"> C</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">S</span><span style="color:#666666">>,</span><span style="color:#BD976A"> condition</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">C</span><span style="color:#666666">, </span><span style="color:#5DA994">any</span><span style="color:#666666">>,</span><span style="color:#BD976A"> coercer</span><span style="color:#666666">: </span><span style="color:#5DA994">Coercer</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">C</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional coercion step to its input.

This allows you to transform input data before validating it, to increase the
likelihood that it passes validationâ€”for example for default values, parsing
different formats, etc.

Note: You must use `create(value, Struct)` on the value to have the coercion
take effect! Using simply `assert()` or `is()` will not use coercion.</div></span>coerce</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> date</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a valid `Date`.

Note: this also ensures that the value is *not* an invalid `Date` object,
which can occur when parsing a date fails but still returns a `Date`.</div></span>date</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> define</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> validator</span><span style="color:#666666">: </span><span style="color:#5DA994">Validator</span><span style="color:#666666">):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Define a new struct type with a custom validation function.</div></span>define</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> enums</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">U</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> number</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> U</span><span style="color:#666666">[]>(</span><span style="color:#BD976A">values</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[</span><span style="color:#5DA994">number</span><span style="color:#666666">],</span><span style="color:#666666"> {</span><span style="color:#666666"> [</span><span style="color:#5DA994">K</span><span style="color:#CB7676"> in</span><span style="color:#5DA994"> T</span><span style="color:#666666">[</span><span style="color:#5DA994">number</span><span style="color:#666666">]]: </span><span style="color:#5DA994">K</span><span style="color:#666666">;</span><span style="color:#666666"> }></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is one of a set of potential values.

Note: after creating the struct, you can access the definition of the
potential values as `struct.schema`.</div></span>enums</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Infer</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#5DA994"> any</span><span style="color:#666666">>></span><span style="color:#666666"> =</span><span style="color:#5DA994"> T</span><span style="color:#666666">[</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">TYPE</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code><div class="twoslash-popup-docs">A type utility to extract the type from a `Struct` class.</div></span>Infer</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> integer</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is an integer.</div></span>integer</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> intersection</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> AnyStruct</span><span style="color:#666666">,</span><span style="color:#5DA994"> B</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> AnyStruct</span><span style="color:#666666">[]>(</span><span style="color:#BD976A">Structs</span><span style="color:#666666">: [</span><span style="color:#5DA994">A</span><span style="color:#666666">, ...</span><span style="color:#5DA994">B</span><span style="color:#666666">]):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Infer</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#666666">></span><span style="color:#666666"> &#x26;</span><span style="color:#5DA994"> UnionToIntersection</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">InferStructTuple</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">B</span><span style="color:#666666">>[</span><span style="color:#5DA994">number</span><span style="color:#666666">]>,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value matches all of a set of types.</div></span>intersection</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> literal</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> boolean</span><span style="color:#666666">>(</span><span style="color:#BD976A">constant</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">3</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is an exact value, using `===` for comparison.</div></span>literal</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> number</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a number.</div></span>number</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> object</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is an object, that is has a known set of properties,
and that its properties are of specific types.

Note: Unrecognized properties will fail validation.</div></span>object</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> pattern</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">S</span><span style="color:#666666">>,</span><span style="color:#BD976A"> regexp</span><span style="color:#666666">: </span><span style="color:#5DA994">RegExp</span><span style="color:#666666">):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a string matches a regular expression.</div></span>pattern</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">S</span><span style="color:#666666">>,</span><span style="color:#BD976A"> name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> refiner</span><span style="color:#666666">: </span><span style="color:#5DA994">Refiner</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional refinement to the validation.

The refiner function is guaranteed to receive a value of the struct's type,
because the struct's existing validation will already have passed. This
allows you to layer additional validation on top of existing structs.</div></span>refine</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> set</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">>,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is a `Set` object, and that its elements are of a
specific type.</div></span>set</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> string</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a string.</div></span>string</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">class</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666"> =</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666"> =</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">`Struct` objects encapsulate the validation logic for a specific type of
values. Once constructed, you use the `assert`, `is` or `validate` helpers to
validate unknown input data against the struct.</div></span>Struct</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">class</span><span style="color:#5DA994"> StructError</span></code><div class="twoslash-popup-docs">`StructError` objects are thrown (or returned) when validation fails.

Validation logic is design to exit early for maximum performance. The error
represents the first error encountered during validation. For more detail,
the `error.failures` property is a generator function that can be run to
continue validation and receive all the failures in the data.</div></span>StructError</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> union</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> AnyStruct</span><span style="color:#666666">,</span><span style="color:#5DA994"> B</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> AnyStruct</span><span style="color:#666666">[]>(</span><span style="color:#BD976A">Structs</span><span style="color:#666666">: [</span><span style="color:#5DA994">A</span><span style="color:#666666">, ...</span><span style="color:#5DA994">B</span><span style="color:#666666">]):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Infer</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">A</span><span style="color:#666666">></span><span style="color:#666666"> |</span><span style="color:#5DA994"> InferStructTuple</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">B</span><span style="color:#666666">>[</span><span style="color:#5DA994">number</span><span style="color:#666666">],</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value matches one of a set of types.</div></span>union</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#4D9375"> from</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">superstruct</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#4D9375">import</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">COLOURS</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>COLOURS</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">EMAIL_REGEX_S</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^(?:[a-z0-9!#$%&#x26;'*+/=?^_`{|}~-]+(?:</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.[a-z0-9!#$%&#x26;'*+/=?^_`{|}~-]+)*|</span><span style="color:#C99076">\"</span><span style="color:#C98A7D">(?:[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\b\v\f\u000E</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\u001F</span><span style="color:#C98A7D">!#-[]-]|</span><span style="color:#C99076">\\\\</span><span style="color:#C98A7D">[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\t\v\f\u000E</span><span style="color:#C98A7D">-])*</span><span style="color:#C99076">\"</span><span style="color:#C98A7D">)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\b\v\f\u000E</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\u001F</span><span style="color:#C98A7D">!-ZS-]|</span><span style="color:#C99076">\\\\</span><span style="color:#C98A7D">[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\t\v\f\u000E</span><span style="color:#C98A7D">-])+)</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">])$</span><span style="color:#C98A7D99">"</span></code></span>EMAIL_REGEX_S</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">ISO_DATE_REGEX_S</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">+-]?</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d{4}(?!</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d{2}</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">b))((-?)((0[1-9]|1[0-2])(</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">3([12]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|0[1-9]|3[01]))?|W([0-4]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|[12]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d{2}|3([0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|6[1-6])))([T</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">s]((([01]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|2[0-3])((:?)[0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d)?|24</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">:?00)([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.,]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d+(?!:))?)?(</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">17[0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.,]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d+)?)?([zZ]|([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">+-])([01]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|2[0-3]):?([0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d)?)?)?)?$</span><span style="color:#C98A7D99">"</span></code></span>ISO_DATE_REGEX_S</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">PROFILE_TYPE_ARTIST</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span></code></span>PROFILE_TYPE_ARTIST</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">PROFILE_TYPE_LISTENER</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span></code></span>PROFILE_TYPE_LISTENER</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">E</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">E</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">SUBSCRIPTION_TYPES</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>SUBSCRIPTION_TYPES</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#4D9375"> from</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">./libs/common/src/index</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">EMAIL_REGEX</span><span style="color:#666666">: </span><span style="color:#5DA994">RegExp</span></code></span>EMAIL_REGEX</span></span><span style="color:#666666"> =</span><span style="color:#CB7676"> new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">RegExp</span><span style="color:#666666">: </span><span style="color:#5DA994">RegExpConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> (</span><span style="color:#BD976A">pattern</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#5DA994">RegExp</span><span style="color:#666666">,</span><span style="color:#BD976A"> flags</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> RegExp</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">2</span><span style="color:#BD976A"> overloads</span><span style="color:#666666">)</span></span></code></pre></code></span>RegExp</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">EMAIL_REGEX_S</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^(?:[a-z0-9!#$%&#x26;'*+/=?^_`{|}~-]+(?:</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.[a-z0-9!#$%&#x26;'*+/=?^_`{|}~-]+)*|</span><span style="color:#C99076">\"</span><span style="color:#C98A7D">(?:[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\b\v\f\u000E</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\u001F</span><span style="color:#C98A7D">!#-[]-]|</span><span style="color:#C99076">\\\\</span><span style="color:#C98A7D">[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\t\v\f\u000E</span><span style="color:#C98A7D">-])*</span><span style="color:#C99076">\"</span><span style="color:#C98A7D">)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\b\v\f\u000E</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\u001F</span><span style="color:#C98A7D">!-ZS-]|</span><span style="color:#C99076">\\\\</span><span style="color:#C98A7D">[</span><span style="color:#C99076">\u0001</span><span style="color:#C98A7D">-</span><span style="color:#C99076">\t\v\f\u000E</span><span style="color:#C98A7D">-])+)</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">])$</span><span style="color:#C98A7D99">"</span></code></span>EMAIL_REGEX_S</span></span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">ISO_DATE_REGEXP</span><span style="color:#666666">: </span><span style="color:#5DA994">RegExp</span></code></span>ISO_DATE_REGEXP</span></span><span style="color:#666666"> =</span><span style="color:#CB7676"> new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">RegExp</span><span style="color:#666666">: </span><span style="color:#5DA994">RegExpConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> (</span><span style="color:#BD976A">pattern</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#5DA994">RegExp</span><span style="color:#666666">,</span><span style="color:#BD976A"> flags</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> RegExp</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">2</span><span style="color:#BD976A"> overloads</span><span style="color:#666666">)</span></span></code></pre></code></span>RegExp</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">ISO_DATE_REGEX_S</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">+-]?</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d{4}(?!</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d{2}</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">b))((-?)((0[1-9]|1[0-2])(</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">3([12]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|0[1-9]|3[01]))?|W([0-4]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|[12]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d{2}|3([0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|6[1-6])))([T</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">s]((([01]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|2[0-3])((:?)[0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d)?|24</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">:?00)([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.,]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d+(?!:))?)?(</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">17[0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">.,]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d+)?)?([zZ]|([</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">+-])([01]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d|2[0-3]):?([0-5]</span><span style="color:#C99076">\\</span><span style="color:#C98A7D">d)?)?)?)?$</span><span style="color:#C98A7D99">"</span></code></span>ISO_DATE_REGEX_S</span></span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">isEmail</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">) => </span><span style="color:#5DA994">boolean</span></code></span>isEmail</span></span><span style="color:#666666"> =</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">EMAIL_REGEX</span><span style="color:#666666">: </span><span style="color:#5DA994">RegExp</span></code></span>EMAIL_REGEX</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">RegExp</span><span style="color:#666666">.</span><span style="color:#80A665">test</span><span style="color:#666666">(</span><span style="color:#BD976A">string</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">boolean</span></code><div class="twoslash-popup-docs">Returns a Boolean value that indicates whether or not a pattern exists in a searched string.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">string String on which to perform the search.</span></span></div></span>test</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD">// TODO fix their example https://github.com/ianstormtaylor/superstruct/blob/main/examples/custom-types.js - `code` not in Result</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">Email</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>Email</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">define</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">>(</span><span style="color:#BD976A">name</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> validator</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Validator</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">unknown</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Define a new struct type with a custom validation function.</div></span>define</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">Email</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span></code></span>value</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#758575DD">  // todo how to compose?</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#CB7676">typeof </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span></code></span>value</span></span><span style="color:#CB7676"> !== </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">string</span><span style="color:#C98A7D99">'</span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">not_string</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#CB7676">!</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">isEmail</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">) => </span><span style="color:#5DA994">boolean</span></code></span>isEmail</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">))</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">not_email</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">  }</span><span style="color:#4D9375"> else</span><span style="color:#4D9375"> if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">String</span><span style="color:#666666">.</span><span style="color:#B8A965">length</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs">Returns the length of a String object.</div></span>length</span></span><span style="color:#666666"> >=</span><span style="color:#4C9A91"> 256</span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">too_long</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">  }</span><span style="color:#4D9375"> else</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#4D9375"> true</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">IsoDateString</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>IsoDateString</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#BD976A"> name</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> refiner</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Refiner</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional refinement to the validation.

The refiner function is guaranteed to receive a value of the struct's type,
because the struct's existing validation will already have passed. This
allows you to layer additional validation on top of existing structs.</div></span>refine</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> string</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a string.</div></span>string</span></span><span style="color:#666666">(),</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">IsoDateString</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>s</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">ISO_DATE_REGEXP</span><span style="color:#666666">: </span><span style="color:#5DA994">RegExp</span></code></span>ISO_DATE_REGEXP</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">RegExp</span><span style="color:#666666">.</span><span style="color:#80A665">test</span><span style="color:#666666">(</span><span style="color:#BD976A">string</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">boolean</span></code><div class="twoslash-popup-docs">Returns a Boolean value that indicates whether or not a pattern exists in a searched string.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">string String on which to perform the search.</span></span></div></span>test</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>s</span></span><span style="color:#666666">)</span></span>
<span class="line"><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">IsoDate</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>IsoDate</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">coerce</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">,</span><span style="color:#5DA994"> string</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Date</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#BD976A"> condition</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> any</span><span style="color:#666666">>,</span><span style="color:#BD976A"> coercer</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Coercer</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Date</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional coercion step to its input.

This allows you to transform input data before validating it, to increase the
likelihood that it passes validationâ€”for example for default values, parsing
different formats, etc.

Note: You must use `create(value, Struct)` on the value to have the coercion
take effect! Using simply `assert()` or `is()` will not use coercion.</div></span>coerce</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> date</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a valid `Date`.

Note: this also ensures that the value is *not* an invalid `Date` object,
which can occur when parsing a date fails but still returns a `Date`.</div></span>date</span></span><span style="color:#666666">(),</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">IsoDateString</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>IsoDateString</span></span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#CB7676"> new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">Date</span><span style="color:#666666">: </span><span style="color:#5DA994">DateConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#5DA994">number</span><span style="color:#666666"> | </span><span style="color:#5DA994">Date</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> Date</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">4</span><span style="color:#BD976A"> overloads</span><span style="color:#666666">)</span></span></code></pre></code></span>Date</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD">// can go with `define` and branding but since the lib doesn't support out of the box let's skip it</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonNegative</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonNegative</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#BD976A"> name</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> refiner</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Refiner</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional refinement to the validation.

The refiner function is guaranteed to receive a value of the struct's type,
because the struct's existing validation will already have passed. This
allows you to layer additional validation on top of existing structs.</div></span>refine</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> number</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a number.</div></span>number</span></span><span style="color:#666666">(),</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">NonNegative</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">n</span><span style="color:#666666">:</span><span style="color:#BD976A"> number</span></code></span>n</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">n</span><span style="color:#666666">:</span><span style="color:#BD976A"> number</span></code></span>n</span></span><span style="color:#666666"> >=</span><span style="color:#4C9A91"> 0</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#758575DD">// can be "min(integer(), 0)" but I went this way to show intersections</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonNegativeInteger</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonNegativeInteger</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">intersection</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#666666"> [</span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>]>(</span><span style="color:#BD976A">Structs</span><span style="color:#DBD7CAEE">: </span><span style="color:#666666">[</span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>])</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value matches all of a set of types.</div></span>intersection</span></span><span style="color:#666666">([</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonNegative</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonNegative</span></span><span style="color:#666666">,</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> integer</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is an integer.</div></span>integer</span></span><span style="color:#666666">()]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD">// discriminated unions not exactly supported https://github.com/ianstormtaylor/superstruct/issues/1183</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">ProfileListener</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>ProfileListener</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value is an object, that is has a known set of properties,
and that its properties are of specific types.

Note: Unrecognized properties will fail validation.</div></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">  </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">literal</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>(</span><span style="color:#BD976A">constant</span><span style="color:#DBD7CAEE">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">3</span><span style="color:#BD976A"> overloads</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is an exact value, using `===` for comparison.</div></span>literal</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">PROFILE_TYPE_LISTENER</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span></code></span>PROFILE_TYPE_LISTENER</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">  </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">boughtTracks</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>boughtTracks</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonNegativeInteger</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonNegativeInteger</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">ProfileArtist</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>ProfileArtist</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value is an object, that is has a known set of properties,
and that its properties are of specific types.

Note: Unrecognized properties will fail validation.</div></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">  </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">literal</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>(</span><span style="color:#BD976A">constant</span><span style="color:#DBD7CAEE">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">3</span><span style="color:#BD976A"> overloads</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is an exact value, using `===` for comparison.</div></span>literal</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">PROFILE_TYPE_ARTIST</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span></code></span>PROFILE_TYPE_ARTIST</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">  </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">publishedTracks</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>publishedTracks</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonNegativeInteger</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonNegativeInteger</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">Colour</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#BD976A">    red</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    green</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    blue</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>Colour</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">enums</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]>(</span><span style="color:#BD976A">values</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">])</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#B8A965">    red</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    green</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    blue</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value is one of a set of potential values.

Note: after creating the struct, you can access the definition of the
potential values as `struct.schema`.</div></span>enums</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">COLOURS</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>COLOURS</span></span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">HexColour</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>HexColour</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">pattern</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#BD976A"> regexp</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">RegExp</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a string matches a regular expression.</div></span>pattern</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> string</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a string.</div></span>string</span></span><span style="color:#666666">(),</span><span style="color:#C98A7D99"> /</span><span style="color:#4D9375">^</span><span style="color:#C4704F">#</span><span style="color:#666666">[</span><span style="color:#C99076">a-fA-F0-9</span><span style="color:#666666">]</span><span style="color:#4C9A91">{6}</span><span style="color:#4D9375">$</span><span style="color:#C98A7D99">/</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">ColourOrHex</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>ColourOrHex</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#BD976A">union</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#B8A965">    red</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    green</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    blue</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>,</span><span style="color:#666666"> [</span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>]>(</span><span style="color:#BD976A">Structs</span><span style="color:#666666">: [</span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#BD976A">    red</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    green</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    blue</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>, </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;...>]):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value matches one of a set of types.</div></span>union</span></span><span style="color:#666666">([</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">Colour</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#BD976A">    red</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    green</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    blue</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>Colour</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">HexColour</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>HexColour</span></span><span style="color:#666666">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">StripeCustomerId</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>StripeCustomerId</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">pattern</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#BD976A"> regexp</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">RegExp</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a string matches a regular expression.</div></span>pattern</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> string</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a string.</div></span>string</span></span><span style="color:#666666">(),</span><span style="color:#C98A7D99"> /</span><span style="color:#4D9375">^</span><span style="color:#C4704F">cus_</span><span style="color:#666666">[</span><span style="color:#C99076">a-zA-Z0-9</span><span style="color:#666666">]</span><span style="color:#4C9A91">{14,}</span><span style="color:#4D9375">$</span><span style="color:#C98A7D99">/</span><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">SubscriptionType</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#BD976A">    free</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    pro</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    enterprise</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>SubscriptionType</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">enums</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]>(</span><span style="color:#BD976A">values</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">])</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#B8A965">    free</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    pro</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    enterprise</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value is one of a set of potential values.

Note: after creating the struct, you can access the definition of the
potential values as `struct.schema`.</div></span>enums</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">SUBSCRIPTION_TYPES</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>SUBSCRIPTION_TYPES</span></span><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD">// loses the refinement after assign() https://github.com/ianstormtaylor/superstruct/issues/1188</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">IsoDateStringRange</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>IsoDateStringRange</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">refine</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">struct</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}>,</span><span style="color:#BD976A"> name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> refiner</span><span style="color:#666666">: </span><span style="color:#5DA994">Refiner</span><span style="color:#666666">&#x3C;...>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></span></code></pre></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional refinement to the validation.

The refiner function is guaranteed to receive a value of the struct's type,
because the struct's existing validation will already have passed. This
allows you to layer additional validation on top of existing structs.</div></span>refine</span></span><span style="color:#666666">(</span></span>
<span class="line"><span style="color:#80A665">  </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value is an object, that is has a known set of properties,
and that its properties are of specific types.

Note: Unrecognized properties will fail validation.</div></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Date</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>createdAt</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">IsoDate</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>IsoDate</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Date</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>updatedAt</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">IsoDate</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>IsoDate</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">  }),</span></span>
<span class="line"><span style="color:#C98A7D99">  '</span><span style="color:#C98A7D">DateRange</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">  (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span></code></span>createdAt</span></span><span style="color:#666666"> ></span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span></code></span>updatedAt</span></span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">      return</span><span style="color:#666666"> (</span></span>
<span class="line"><span style="color:#C98A7D99">        `</span><span style="color:#C98A7D">Expected 'createdAt' to be less or equal than 'updatedAt' on type 'IsoDateStringRange', </span><span style="color:#C98A7D99">`</span><span style="color:#CB7676"> +</span></span>
<span class="line"><span style="color:#C98A7D99">        `</span><span style="color:#C98A7D">but received </span><span style="color:#666666">${</span><span style="color:#C98A7D"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">var </span><span style="color:#BD976A">JSON</span><span style="color:#666666">: </span><span style="color:#5DA994">JSON</span></code><div class="twoslash-popup-docs">An intrinsic object that provides functions to convert JavaScript values to and from the JavaScript Object Notation (JSON) format.</div></span>JSON</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">JSON</span><span style="color:#666666">.</span><span style="color:#80A665">stringify</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">any</span><span style="color:#666666">,</span><span style="color:#BD976A"> replacer</span><span style="color:#CB7676">?:</span><span style="color:#666666"> ((</span><span style="color:#C99076">this</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#BD976A"> key</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> value</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> any</span><span style="color:#666666">)</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">,</span><span style="color:#BD976A"> space</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> string</span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> number</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">string</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Converts a JavaScript value to a JavaScript Object Notation (JSON) string.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">value A JavaScript value, usually an object or array, to be converted.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">replacer A function that transforms the results.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">space Adds indentation, white space, and line break characters to the return-value JSON text to make it easier to read.</span></span></div></span>stringify</span></span><span style="color:#666666">(</span><span style="color:#C98A7D"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">)</span><span style="color:#666666">}</span><span style="color:#C98A7D99">`</span></span>
<span class="line"><span style="color:#666666">      );</span></span>
<span class="line"><span style="color:#666666">    }</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#4D9375"> true</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">uniqArray</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>) => </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>></span></code></span>uniqArray</span></span><span style="color:#666666"> =</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>></span></code></span>T</span></span><span style="color:#666666">>(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">class</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666"> =</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666"> =</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">`Struct` objects encapsulate the validation logic for a specific type of
values. Once constructed, you use the `assert`, `is` or `validate` helpers to
validate unknown input data against the struct.</div></span>Struct</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>></span></code></span>T</span></span><span style="color:#666666">>)</span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#80A665">  </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">[],</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#CB7676">>></span><span style="color:#666666">,</span><span style="color:#BD976A"> name</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> refiner</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Refiner</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">[]>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">[],</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#CB7676">>></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional refinement to the validation.

The refiner function is guaranteed to receive a value of the struct's type,
because the struct's existing validation will already have passed. This
allows you to layer additional validation on top of existing structs.</div></span>refine</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">array</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>>(</span><span style="color:#BD976A">Element</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is an array and that its elements are of a specific type.

Note: If you omit the element struct, the arrays elements will not be
iterated at all. This can be helpful for cases where performance is critical,
and it is preferred to using `array(any())`.</div></span>array</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">),</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">UniqArray</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">v</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>v</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    if</span><span style="color:#666666"> (</span><span style="color:#CB7676">new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">Set</span><span style="color:#666666">: </span><span style="color:#5DA994">SetConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">iterable</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">Iterable</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">> | </span><span style="color:#CB7676">null</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>Set</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">v</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>v</span></span><span style="color:#666666">).</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">>.</span><span style="color:#BD976A">size</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@returns</span><span class="twoslash-popup-docs-tag-value">the number of (unique) elements in Set.</span></span></div></span>size</span></span><span style="color:#CB7676"> !== </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">v</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>v</span></span><span style="color:#666666">.</span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">Array</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">>.</span><span style="color:#B8A965">length</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs">Gets or sets the length of the array. This is a number one higher than the highest index in the array.</div></span>length</span></span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">      return</span><span style="color:#C98A7D99"> `</span><span style="color:#C98A7D">Expected unique items on type 'UniqArray', but received </span><span style="color:#666666">${</span><span style="color:#C98A7D"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">var </span><span style="color:#BD976A">JSON</span><span style="color:#666666">: </span><span style="color:#5DA994">JSON</span></code><div class="twoslash-popup-docs">An intrinsic object that provides functions to convert JavaScript values to and from the JavaScript Object Notation (JSON) format.</div></span>JSON</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">JSON</span><span style="color:#666666">.</span><span style="color:#80A665">stringify</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">any</span><span style="color:#666666">,</span><span style="color:#BD976A"> replacer</span><span style="color:#CB7676">?:</span><span style="color:#666666"> ((</span><span style="color:#C99076">this</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#BD976A"> key</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> value</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> any</span><span style="color:#666666">)</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">,</span><span style="color:#BD976A"> space</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> string</span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> number</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">string</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Converts a JavaScript value to a JavaScript Object Notation (JSON) string.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">value A JavaScript value, usually an object or array, to be converted.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">replacer A function that transforms the results.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">space Adds indentation, white space, and line break characters to the return-value JSON text to make it easier to read.</span></span></div></span>stringify</span></span><span style="color:#666666">(</span></span>
<span class="line"><span style="color:#C98A7D">        </span><span style="color:#C98A7D"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">v</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>v</span></span></span>
<span class="line"><span style="color:#666666">      )</span><span style="color:#666666">}</span><span style="color:#C98A7D99">`</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">    }</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#4D9375"> true</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">arrayToSet</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>) => </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>></span></code></span>arrayToSet</span></span><span style="color:#666666"> =</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>></span></code></span>T</span></span><span style="color:#666666">>(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">class</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666"> =</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">,</span><span style="color:#5DA994"> S</span><span style="color:#666666"> =</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">`Struct` objects encapsulate the validation logic for a specific type of
values. Once constructed, you use the `assert`, `is` or `validate` helpers to
validate unknown input data against the struct.</div></span>Struct</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>></span></code></span>T</span></span><span style="color:#666666">>)</span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#80A665">  </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">coerce</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>,</span><span style="color:#5DA994"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">[],</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#CB7676">>></span><span style="color:#666666">,</span><span style="color:#BD976A"> condition</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">>,</span><span style="color:#BD976A"> any</span><span style="color:#666666">>,</span><span style="color:#BD976A"> coercer</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Coercer</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#CB7676">>></span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;...></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional coercion step to its input.

This allows you to transform input data before validating it, to increase the
likelihood that it passes validationâ€”for example for default values, parsing
different formats, etc.

Note: You must use `create(value, Struct)` on the value to have the coercion
take effect! Using simply `assert()` or `is()` will not use coercion.</div></span>coerce</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">uniqArray</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>) => </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>></span></code></span>uniqArray</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">),</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">Element</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Ensure that a value is a `Set` object, and that its elements are of a
specific type.</div></span>set</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">),</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">v</span><span style="color:#666666">:</span><span style="color:#BD976A"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">></span></code></span>v</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#CB7676"> new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">Set</span><span style="color:#666666">: </span><span style="color:#5DA994">SetConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">iterable</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">Iterable</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">> | </span><span style="color:#CB7676">null</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>Set</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">v</span><span style="color:#666666">:</span><span style="color:#BD976A"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">></span></code></span>v</span></span><span style="color:#666666">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">FavouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">[], </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>></span></code></span>FavouriteColours</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">arrayToSet</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>(</span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>) => </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">[], </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>></span></code></span>arrayToSet</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">ColourOrHex</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>ColourOrHex</span></span><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonEmptyString</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonEmptyString</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>(</span><span style="color:#BD976A">struct</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">>,</span><span style="color:#BD976A"> name</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> refiner</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Refiner</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Augment a `Struct` to add an additional refinement to the validation.

The refiner function is guaranteed to receive a value of the struct's type,
because the struct's existing validation will already have passed. This
allows you to layer additional validation on top of existing structs.</div></span>refine</span></span><span style="color:#666666">(</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> string</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that a value is a string.</div></span>string</span></span><span style="color:#666666">(),</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">NonEmptyString</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>s</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>s</span></span><span style="color:#666666">.</span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">String</span><span style="color:#666666">.</span><span style="color:#B8A965">length</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs">Returns the length of a String object.</div></span>length</span></span><span style="color:#CB7676"> === </span><span style="color:#4C9A91">0</span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#C98A7D99"> `</span><span style="color:#C98A7D">Expected non-empty string on type 'NonEmptyString', but received </span><span style="color:#666666">${</span><span style="color:#C98A7D"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">var </span><span style="color:#BD976A">JSON</span><span style="color:#666666">: </span><span style="color:#5DA994">JSON</span></code><div class="twoslash-popup-docs">An intrinsic object that provides functions to convert JavaScript values to and from the JavaScript Object Notation (JSON) format.</div></span>JSON</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">JSON</span><span style="color:#666666">.</span><span style="color:#80A665">stringify</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">any</span><span style="color:#666666">,</span><span style="color:#BD976A"> replacer</span><span style="color:#CB7676">?:</span><span style="color:#666666"> ((</span><span style="color:#C99076">this</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#BD976A"> key</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> value</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> any</span><span style="color:#666666">)</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">,</span><span style="color:#BD976A"> space</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> string</span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> number</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">string</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Converts a JavaScript value to a JavaScript Object Notation (JSON) string.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">value A JavaScript value, usually an object or array, to be converted.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">replacer A function that transforms the results.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">space Adds indentation, white space, and line break characters to the return-value JSON text to make it easier to read.</span></span></div></span>stringify</span></span><span style="color:#666666">(</span></span>
<span class="line"><span style="color:#C98A7D">      </span><span style="color:#C98A7D"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>s</span></span></span>
<span class="line"><span style="color:#666666">    )</span><span style="color:#666666">}</span><span style="color:#C98A7D99">`</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#4D9375">  return</span><span style="color:#4D9375"> true</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">any</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>FileSystem</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> any</span><span style="color:#666666">():</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code><div class="twoslash-popup-docs">Ensure that any value passes validation.</div></span>any</span></span><span style="color:#666666">();</span><span style="color:#758575DD"> // TODO</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">User</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>User</span></span><span style="color:#666666"> =</span><span style="color:#80A665"> </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">assign</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#BD976A">        free</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">        pro</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">        enterprise</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">    }>;</span></span>
<span class="line"><span style="color:#666666">    ...</span><span style="color:#4C9A91"> 4</span><span style="color:#5DA994"> more</span><span style="color:#666666"> .</span><span style="color:#DBD7CAEE">..</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">A</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;...>,</span><span style="color:#BD976A"> B</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;...>):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">3</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></span></code></pre></code><div class="twoslash-popup-docs">Create a new struct that combines the properties properties from multiple
object or type structs. Its return type will match the first parameter's type.

Like JavaScript's `Object.assign` utility.</div></span>assign</span></span><span style="color:#666666">(</span></span>
<span class="line"><span style="color:#80A665">  </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#BD976A">        free</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">        pro</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">        enterprise</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">    }>;</span></span>
<span class="line"><span style="color:#666666">    ...</span><span style="color:#4C9A91"> 4</span><span style="color:#5DA994"> more</span><span style="color:#666666"> .</span><span style="color:#DBD7CAEE">..</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value is an object, that is has a known set of properties,
and that its properties are of specific types.

Note: Unrecognized properties will fail validation.</div></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">name</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>name</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonEmptyString</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonEmptyString</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">email</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">unknown</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>email</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">Email</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>Email</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">subscription</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#B8A965">    free</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    pro</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    enterprise</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>subscription</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">SubscriptionType</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, {</span></span>
<span class="line"><span style="color:#BD976A">    free</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    pro</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    enterprise</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>SubscriptionType</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">stripeId</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>stripeId</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">StripeCustomerId</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>StripeCustomerId</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">visits</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>visits</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">NonNegativeInteger</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>NonNegativeInteger</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">favouriteColours</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">[],</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#CB7676">>></span></code></span>favouriteColours</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">FavouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">[], </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>></span></code></span>FavouriteColours</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">profile</span><span style="color:#666666">:</span><span style="color:#80A665"> Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></span></code></pre></code></span>profile</span></span><span style="color:#666666">: </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#BD976A">union</span><span style="color:#666666">&#x3C;</span><span style="color:#80A665">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>,</span><span style="color:#666666"> [</span><span style="color:#80A665">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>]>(</span><span style="color:#BD976A">Structs</span><span style="color:#666666">: [...]):</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></span></code></pre></code><div class="twoslash-popup-docs">Ensure that a value matches one of a set of types.</div></span>union</span></span><span style="color:#666666">([</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">ProfileListener</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>ProfileListener</span></span><span style="color:#666666">, </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">ProfileArtist</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>ProfileArtist</span></span><span style="color:#666666">]),</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fileSystem</span><span style="color:#666666">:</span><span style="color:#BD976A"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">any</span><span style="color:#666666">,</span><span style="color:#CB7676"> null</span><span style="color:#666666">></span></code></span>fileSystem</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">any</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">></span></code></span>FileSystem</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">  }),</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">IsoDateStringRange</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#CB7676">null</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>IsoDateStringRange</span></span></span>
<span class="line"><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> User</span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>User</span></span><span style="color:#666666"> =</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Infer</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> Struct</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">any</span><span style="color:#666666">,</span><span style="color:#5DA994"> any</span><span style="color:#666666">>></span><span style="color:#666666"> =</span><span style="color:#5DA994"> T</span><span style="color:#666666">[</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">TYPE</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code><div class="twoslash-popup-docs">A type utility to extract the type from a `Struct` class.</div></span>Infer</span></span><span style="color:#666666">&#x3C;</span><span style="color:#CB7676">typeof</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">User</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>User</span></span><span style="color:#666666">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375">export</span><span style="color:#CB7676"> const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">decodeUser</span><span style="color:#666666">: (</span><span style="color:#BD976A">u</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">) => </span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">User</span><span style="color:#666666">></span></code></span>decodeUser</span></span><span style="color:#666666"> =</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">u</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span></code></span>u</span></span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">E</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">E</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> User</span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>User</span></span><span style="color:#666666">></span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#758575DD">// .validate() loses coercions e.g. IsoDate; I have to choose either or</span></span>
<span class="line"><span style="color:#666666">{</span></span>
<span class="line"><span style="color:#4D9375">  try</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">r</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>r</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">User</span><span style="color:#666666">: </span><span style="color:#5DA994">Struct</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>User</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#BD976A">Struct</span><span style="color:#666666">&#x3C;{</span><span style="color:#80A665"> createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span><span style="color:#80A665"> updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span><span style="color:#80A665"> name</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span><span style="color:#80A665"> email</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">;</span><span style="color:#80A665"> subscription</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span><span style="color:#80A665"> stripeId</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span><span style="color:#80A665"> visits</span><span style="color:#666666">:</span><span style="color:#BD976A"> number</span><span style="color:#666666">;</span><span style="color:#80A665"> favouriteColours</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">[];</span><span style="color:#80A665"> profile</span><span style="color:#666666">:</span><span style="color:#666666"> {</span><span style="color:#666666"> ...;</span><span style="color:#666666"> }</span><span style="color:#CB7676"> |</span><span style="color:#666666"> {</span><span style="color:#666666"> ...;</span><span style="color:#666666"> };</span><span style="color:#BD976A"> fileSystem</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> any</span><span style="color:#666666">;</span><span style="color:#666666"> }, { ...; }>.</span><span style="color:#80A665">create</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">unknown</span><span style="color:#666666">,</span><span style="color:#BD976A"> message</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> string</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#B8A965">    createdAt</span><span style="color:#666666">: </span><span style="color:#BD976A">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#BD976A">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#BD976A">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#BD976A">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#BD976A">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#BD976A">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#BD976A">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } </span><span style="color:#CB7676">|</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code><div class="twoslash-popup-docs">Create a value with the struct's coercion logic, then validate it.</div></span>create</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">u</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span></code></span>u</span></span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#666666"> { </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">_tag</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">"</span></code></span>_tag</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">, </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    name</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    email</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    subscription</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    stripeId</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    visits</span><span style="color:#666666">:</span><span style="color:#BD976A"> number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    favouriteColours</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#80A665">    profile</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    }</span><span style="color:#CB7676"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">r</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>r</span></span><span style="color:#666666"> };</span></span>
<span class="line"><span style="color:#666666">  }</span><span style="color:#4D9375"> catch</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">local</span><span style="color:#BD976A"> var</span><span style="color:#666666">)</span><span style="color:#80A665"> e</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">unknown</span></code></span>e</span></span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#B8A965">      </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">_tag</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">"</span></code></span>_tag</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">      </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">error</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>error</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">local</span><span style="color:#BD976A"> var</span><span style="color:#666666">)</span><span style="color:#80A665"> e</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">unknown</span></code></span>e</span></span><span style="color:#CB7676"> instanceof</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">class</span><span style="color:#5DA994"> StructError</span></code><div class="twoslash-popup-docs">`StructError` objects are thrown (or returned) when validation fails.

Validation logic is design to exit early for maximum performance. The error
represents the first error encountered during validation. For more detail,
the `error.failures` property is a generator function that can be run to
continue validation and receive all the failures in the data.</div></span>StructError</span></span></span>
<span class="line"><span style="color:#CB7676">        ?</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">var </span><span style="color:#BD976A">JSON</span><span style="color:#666666">: </span><span style="color:#5DA994">JSON</span></code><div class="twoslash-popup-docs">An intrinsic object that provides functions to convert JavaScript values to and from the JavaScript Object Notation (JSON) format.</div></span>JSON</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">JSON</span><span style="color:#666666">.</span><span style="color:#80A665">stringify</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">any</span><span style="color:#666666">,</span><span style="color:#BD976A"> replacer</span><span style="color:#CB7676">?:</span><span style="color:#666666"> (</span><span style="color:#BD976A">string</span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> number</span><span style="color:#666666">)[]</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> null</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">,</span><span style="color:#BD976A"> space</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> string</span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> number</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> undefined</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">string</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Converts a JavaScript value to a JavaScript Object Notation (JSON) string.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">value A JavaScript value, usually an object or array, to be converted.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">replacer An array of strings and numbers that acts as an approved list for selecting the object properties that will be stringified.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">space Adds indentation, white space, and line break characters to the return-value JSON text to make it easier to read.</span></span></div></span>stringify</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">local</span><span style="color:#BD976A"> var</span><span style="color:#666666">)</span><span style="color:#80A665"> e</span><span style="color:#DBD7CAEE">: </span><span style="color:#80A665">StructError</span></code></span>e</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">StructError</span><span style="color:#666666">.</span><span style="color:#BD976A">failures</span><span style="color:#DBD7CAEE">: </span><span style="color:#666666">()</span><span style="color:#666666"> =></span><span style="color:#BD976A"> Failure</span><span style="color:#666666">[]</span></code></span>failures</span></span><span style="color:#666666">(), </span><span style="color:#CB7676">null</span><span style="color:#666666">, </span><span style="color:#4C9A91">2</span><span style="color:#666666">)</span></span>
<span class="line"><span style="color:#CB7676">        :</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">error interpreting the error! have a good day</span><span style="color:#C98A7D99">'</span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375">export</span><span style="color:#CB7676"> const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">encodeUser</span><span style="color:#666666">: (</span><span style="color:#BD976A">_u</span><span style="color:#666666">: </span><span style="color:#5DA994">User</span><span style="color:#666666">) => </span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">></span></code></span>encodeUser</span></span><span style="color:#666666"> =</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">_u</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    name</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    email</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    subscription</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    stripeId</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    visits</span><span style="color:#666666">:</span><span style="color:#BD976A"> number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    favouriteColours</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#80A665">    profile</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    }</span><span style="color:#CB7676"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>_u</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> User</span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">any</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>User</span></span><span style="color:#666666">):</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">E</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">E</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">></span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">  return</span><span style="color:#666666"> { </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">_tag</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">"</span></code></span>_tag</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">, </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">error</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>error</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">the lib cannot do it</span><span style="color:#C98A7D99">'</span><span style="color:#666666"> };</span></span>
<span class="line"><span style="color:#666666">};</span></span>
<span class="line"></span></code></pre>