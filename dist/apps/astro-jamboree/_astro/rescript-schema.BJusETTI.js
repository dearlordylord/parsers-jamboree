import{j as s,P as n,k as p,l as o,i as l}from"./component.Bs3R9e-f.js";import"./index.BbkJZrTS.js";const e={items:{branded:!1,typedErrors:!0,templateLiterals:!1,emailFormatAmbiguityIsAccountedFor:!1,acceptsTypedInput:!1,canGenerateJsonSchema:!0},explanations:{canGenerateJsonSchema:"Core feature, moved to a separate package https://github.com/DZakh/rescript-json-schema"}},c=`<pre class="shiki vitesse-dark twoslash lsp" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#4D9375">import</span><span style="color:#4D9375"> *</span><span style="color:#4D9375"> as</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#4D9375"> from</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">rescript-schema</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#4D9375">import</span><span style="color:#666666"> {</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">COLOURS</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>COLOURS</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">E</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">E</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">SUBSCRIPTION_TYPES</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>SUBSCRIPTION_TYPES</span></span><span style="color:#666666"> }</span><span style="color:#4D9375"> from</span><span style="color:#C98A7D99"> '</span><span style="color:#C98A7D">./libs/common/src/index</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">type</span><span style="color:#5DA994"> TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">[]></span><span style="color:#666666"> =</span><span style="color:#5DA994"> T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#666666"> [</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> K</span><span style="color:#666666">,</span><span style="color:#666666"> ...</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> REST</span><span style="color:#666666">]</span><span style="color:#CB7676"> ?</span><span style="color:#5DA994"> K</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span><span style="color:#CB7676"> ?</span><span style="color:#666666"> [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">K</span><span style="color:#666666">,</span><span style="color:#5DA994"> K</span><span style="color:#666666">>,</span><span style="color:#666666"> ...</span><span style="color:#5DA994">TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">REST</span><span style="color:#666666">>]</span><span style="color:#CB7676"> :</span><span style="color:#5DA994"> never</span><span style="color:#CB7676"> :</span><span style="color:#666666"> []</span></code></span>TupleToLiteral</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#80A665"> type</span><span style="color:#80A665"> TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">[]></span></code></span>T</span></span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">[]></span><span style="color:#666666"> =</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#80A665"> type</span><span style="color:#80A665"> TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">[]></span></code></span>T</span></span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#666666"> [</span></span>
<span class="line"><span style="color:#CB7676">  infer</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> K</span></code></span>K</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">  ...</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> REST</span></code></span>REST</span></span></span>
<span class="line"><span style="color:#666666">]</span></span>
<span class="line"><span style="color:#CB7676">  ?</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> K</span></code></span>K</span></span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span></span>
<span class="line"><span style="color:#CB7676">    ?</span><span style="color:#666666"> [</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">,</span><span style="color:#5DA994"> Input</span><span style="color:#666666"> =</span><span style="color:#5DA994"> Output</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    parse</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    parseAsync</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Promise</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>>;</span></span>
<span class="line"><span style="color:#80A665">    parseOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Output</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serialize</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    serializeOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serializeToJsonOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Json</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    assert</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#666666"> asserts</span><span style="color:#BD976A"> data</span><span style="color:#CB7676"> is</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Schema</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> K</span></code></span>K</span></span><span style="color:#666666">>,</span><span style="color:#666666"> ...</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">type</span><span style="color:#5DA994"> TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">[]></span><span style="color:#666666"> =</span><span style="color:#5DA994"> T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#666666"> [</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> K</span><span style="color:#666666">,</span><span style="color:#666666"> ...</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> REST</span><span style="color:#666666">]</span><span style="color:#CB7676"> ?</span><span style="color:#5DA994"> K</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span><span style="color:#CB7676"> ?</span><span style="color:#666666"> [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">K</span><span style="color:#666666">,</span><span style="color:#5DA994"> K</span><span style="color:#666666">>,</span><span style="color:#666666"> ...</span><span style="color:#5DA994">TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">REST</span><span style="color:#666666">>]</span><span style="color:#CB7676"> :</span><span style="color:#5DA994"> never</span><span style="color:#CB7676"> :</span><span style="color:#666666"> []</span></code></span>TupleToLiteral</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> REST</span></code></span>REST</span></span><span style="color:#666666">>]</span></span>
<span class="line"><span style="color:#CB7676">    :</span><span style="color:#5DA994"> never</span></span>
<span class="line"><span style="color:#CB7676">  :</span><span style="color:#666666"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD">// no brands</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">subscriptionSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>subscriptionSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">union</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>]>(</span><span style="color:#BD976A">schemas</span><span style="color:#666666">: [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>]) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...></span></code></span>union</span></span><span style="color:#666666">(</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">SUBSCRIPTION_TYPES</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>SUBSCRIPTION_TYPES</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">ReadonlyArray</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>.</span><span style="color:#80A665">map</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>>(</span><span style="color:#BD976A">callbackfn</span><span style="color:#DBD7CAEE">: </span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#BD976A"> index</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#BD976A"> array</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> (</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">)[])</span><span style="color:#666666"> =></span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">unknown</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">>,</span><span style="color:#BD976A"> thisArg</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> any</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">unknown</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">>[]</span></code><div class="twoslash-popup-docs">Calls a defined callback function on each element of an array, and returns an array that contains the results.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.</span></span></div></span>map</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> literal</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Literal</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span><span style="color:#666666">>(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Literal</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Literal</span><span style="color:#666666">,</span><span style="color:#5DA994"> Literal</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">7</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code></span>literal</span></span><span style="color:#666666">)</span><span style="color:#4D9375"> as</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">type</span><span style="color:#5DA994"> TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">[]></span><span style="color:#666666"> =</span><span style="color:#5DA994"> T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#666666"> [</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> K</span><span style="color:#666666">,</span><span style="color:#666666"> ...</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> REST</span><span style="color:#666666">]</span><span style="color:#CB7676"> ?</span><span style="color:#5DA994"> K</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span><span style="color:#CB7676"> ?</span><span style="color:#666666"> [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">K</span><span style="color:#666666">,</span><span style="color:#5DA994"> K</span><span style="color:#666666">>,</span><span style="color:#666666"> ...</span><span style="color:#5DA994">TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">REST</span><span style="color:#666666">>]</span><span style="color:#CB7676"> :</span><span style="color:#5DA994"> never</span><span style="color:#CB7676"> :</span><span style="color:#666666"> []</span></code></span>TupleToLiteral</span></span><span style="color:#666666">&#x3C;</span><span style="color:#CB7676">typeof </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">SUBSCRIPTION_TYPES</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>SUBSCRIPTION_TYPES</span></span><span style="color:#666666">></span></span>
<span class="line"><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">hexColourRegexString</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^#[a-fA-F0-9]{6}$</span><span style="color:#C98A7D99">"</span></code></span>hexColourRegexString</span></span><span style="color:#666666"> =</span><span style="color:#C98A7D99"> \`</span><span style="color:#C98A7D">^#[a-fA-F0-9]{6}$</span><span style="color:#C98A7D99">\`</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">hexColourSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>hexColourSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> string</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>,</span><span style="color:#80A665"> refiner</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>) => </span><span style="color:#5DA994">void</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> string</span><span style="color:#666666">></span></code></span>refine</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">string</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>string</span></span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#CB7676">!</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">String</span><span style="color:#666666">.</span><span style="color:#80A665">match</span><span style="color:#666666">(</span><span style="color:#BD976A">regexp</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> RegExp</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">RegExpMatchArray</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> null</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Matches a string with a regular expression, and returns an array containing the results of that search.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">regexp A variable name or string literal containing the regular expression pattern and flags.</span></span></div></span>match</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">hexColourRegexString</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^#[a-fA-F0-9]{6}$</span><span style="color:#C98A7D99">"</span></code></span>hexColourRegexString</span></span><span style="color:#666666">))</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#758575DD">    // weird: throwing void??</span></span>
<span class="line"><span style="color:#4D9375">    throw</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fail</span><span style="color:#666666">:</span><span style="color:#666666"> (</span><span style="color:#BD976A">message</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> never</span></code></span>fail</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">Hex colour must be in the format #RRGGBB</span><span style="color:#C98A7D99">'</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">colourSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>colourSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">union</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>]>(</span><span style="color:#BD976A">schemas</span><span style="color:#666666">: [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>, </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>]) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...></span></code></span>union</span></span><span style="color:#666666">([</span></span>
<span class="line"><span style="color:#666666">  ...(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">COLOURS</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>COLOURS</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">ReadonlyArray</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>.</span><span style="color:#80A665">map</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">>>(</span><span style="color:#BD976A">callbackfn</span><span style="color:#DBD7CAEE">: </span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#BD976A"> index</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#BD976A"> array</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> (</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">)[])</span><span style="color:#666666"> =></span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">unknown</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">>,</span><span style="color:#BD976A"> thisArg</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> any</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">unknown</span><span style="color:#666666">,</span><span style="color:#BD976A"> unknown</span><span style="color:#666666">>[]</span></code><div class="twoslash-popup-docs">Calls a defined callback function on each element of an array, and returns an array that contains the results.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.</span></span></div></span>map</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> literal</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Literal</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span><span style="color:#666666">>(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Literal</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Literal</span><span style="color:#666666">,</span><span style="color:#5DA994"> Literal</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">7</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code></span>literal</span></span><span style="color:#666666">)</span><span style="color:#4D9375"> as</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">type</span><span style="color:#5DA994"> TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">[]></span><span style="color:#666666"> =</span><span style="color:#5DA994"> T</span><span style="color:#CB7676"> extends</span><span style="color:#CB7676"> readonly</span><span style="color:#666666"> [</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> K</span><span style="color:#666666">,</span><span style="color:#666666"> ...</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> REST</span><span style="color:#666666">]</span><span style="color:#CB7676"> ?</span><span style="color:#5DA994"> K</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> string</span><span style="color:#CB7676"> ?</span><span style="color:#666666"> [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">K</span><span style="color:#666666">,</span><span style="color:#5DA994"> K</span><span style="color:#666666">>,</span><span style="color:#666666"> ...</span><span style="color:#5DA994">TupleToLiteral</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">REST</span><span style="color:#666666">>]</span><span style="color:#CB7676"> :</span><span style="color:#5DA994"> never</span><span style="color:#CB7676"> :</span><span style="color:#666666"> []</span></code></span>TupleToLiteral</span></span><span style="color:#666666">&#x3C;</span><span style="color:#CB7676">typeof </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">COLOURS</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#666666"> [</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">red</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">green</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">blue</span><span style="color:#C98A7D99">"</span><span style="color:#666666">]</span></code></span>COLOURS</span></span><span style="color:#666666">>),</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">hexColourSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>hexColourSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">timeConcernTimelessSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>timeConcernTimelessSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">shape</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">  </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Date</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>createdAt</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">datetime</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>, </span><span style="color:#BD976A">message</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>datetime</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">string</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>string</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">  </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Date</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>updatedAt</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">datetime</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>, </span><span style="color:#BD976A">message</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Date</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>datetime</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">string</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>string</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">timeConcernSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>timeConcernSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> refine</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>,</span><span style="color:#80A665"> refiner</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;...>) => </span><span style="color:#5DA994">void</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></span></code></pre></code></span>refine</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">timeConcernTimelessSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>timeConcernTimelessSchema</span></span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#80A665">EffectCtx</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>s</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span></code></span>createdAt</span></span><span style="color:#666666"> ></span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span></code></span>updatedAt</span></span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    throw</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#80A665">EffectCtx</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>s</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fail</span><span style="color:#666666">:</span><span style="color:#666666"> (</span><span style="color:#BD976A">message</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> never</span></code></span>fail</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">createdAt must be less or equal than updatedAt</span><span style="color:#C98A7D99">'</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonNegativeIntegerSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">></span></code></span>nonNegativeIntegerSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">integerMin</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">>, </span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#BD976A">message</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">></span></code></span>integerMin</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">integer</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">></span></code></span>integer</span></span><span style="color:#666666">,</span><span style="color:#4C9A91"> 0</span><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonEmptyStringSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>nonEmptyStringSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> string</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>,</span><span style="color:#80A665"> refiner</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>) => </span><span style="color:#5DA994">void</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> string</span><span style="color:#666666">></span></code></span>refine</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">string</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>string</span></span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">String</span><span style="color:#666666">.</span><span style="color:#B8A965">length</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs">Returns the length of a String object.</div></span>length</span></span><span style="color:#CB7676"> === </span><span style="color:#4C9A91">0</span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    throw</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fail</span><span style="color:#666666">:</span><span style="color:#666666"> (</span><span style="color:#BD976A">message</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> never</span></code></span>fail</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">Must be non-empty</span><span style="color:#C98A7D99">'</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">stripeIdRegexString</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^cus_[a-zA-Z0-9]{14,}$</span><span style="color:#C98A7D99">"</span></code></span>stripeIdRegexString</span></span><span style="color:#666666"> =</span><span style="color:#C98A7D99"> \`</span><span style="color:#C98A7D">^cus_[a-zA-Z0-9]{14,}$</span><span style="color:#C98A7D99">\`</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">stripeIdSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>stripeIdSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> string</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>,</span><span style="color:#80A665"> refiner</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>) => </span><span style="color:#5DA994">void</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> string</span><span style="color:#666666">></span></code></span>refine</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonEmptyStringSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>nonEmptyStringSchema</span></span><span style="color:#666666">,</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#CB7676">!</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">String</span><span style="color:#666666">.</span><span style="color:#80A665">match</span><span style="color:#666666">(</span><span style="color:#BD976A">regexp</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> RegExp</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">RegExpMatchArray</span><span style="color:#CB7676"> |</span><span style="color:#CB7676"> null</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Matches a string with a regular expression, and returns an array containing the results of that search.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">regexp A variable name or string literal containing the regular expression pattern and flags.</span></span></div></span>match</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">stripeIdRegexString</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">^cus_[a-zA-Z0-9]{14,}$</span><span style="color:#C98A7D99">"</span></code></span>stripeIdRegexString</span></span><span style="color:#666666">))</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    throw</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>s</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fail</span><span style="color:#666666">:</span><span style="color:#666666"> (</span><span style="color:#BD976A">message</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> never</span></code></span>fail</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">Stripe id must be in the format cus_XXXXXXXXXXXXXX</span><span style="color:#C98A7D99">'</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666"> =</span><span style="color:#666666"> ({</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> children</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">})</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>FileSystem</span></span><span style="color:#666666"> =</span><span style="color:#666666"> (</span></span>
<span class="line"><span style="color:#666666">  |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">      readonly</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#CB7676">      readonly</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">children</span><span style="color:#666666">:</span><span style="color:#BD976A"> readonly</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">[]</span></code></span>children</span></span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666"> =</span><span style="color:#666666"> ({</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> children</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">})</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>FileSystem</span></span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#666666">    }</span></span>
<span class="line"><span style="color:#666666">  |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">      readonly</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">    }</span></span>
<span class="line"><span style="color:#666666">)</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">  readonly</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">name</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>name</span></span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">fileSystemSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">, </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">></span></code></span>fileSystemSchema</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">,</span><span style="color:#5DA994"> Input</span><span style="color:#666666"> =</span><span style="color:#5DA994"> Output</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    parse</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    parseAsync</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Promise</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>>;</span></span>
<span class="line"><span style="color:#80A665">    parseOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Output</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serialize</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    serializeOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serializeToJsonOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Json</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    assert</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#666666"> asserts</span><span style="color:#BD976A"> data</span><span style="color:#CB7676"> is</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Schema</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666"> =</span><span style="color:#666666"> ({</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> children</span><span style="color:#666666">: </span><span style="color:#CB7676">readonly</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">})</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    readonly</span><span style="color:#BD976A"> name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>FileSystem</span></span><span style="color:#666666">> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> recursive</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">,</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666">>(</span><span style="color:#80A665">definer</span><span style="color:#666666">: (</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">, </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">>) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">, </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">>):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></code></span>recursive</span></span><span style="color:#666666">((</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">schema</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">,</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">></span></code></span>schema</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665">union</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    children</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    children</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[];</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>, [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}>]>(</span><span style="color:#BD976A">schemas</span><span style="color:#666666">: [...]) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...></span></span></code></pre></code></span>union</span></span><span style="color:#666666">([</span></span>
<span class="line"><span style="color:#BD976A">    </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    children</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[], </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[]>;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">shape</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    children</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">      </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> literal</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">7</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code></span>literal</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">directory</span><span style="color:#C98A7D99">'</span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">      </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">children</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">[],</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">[]></span></code></span>children</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[],</span><span style="color:#5DA994"> FileSystem</span><span style="color:#666666">[]>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[], </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[]>,</span><span style="color:#80A665"> refiner</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[], </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[], </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[]>) => </span><span style="color:#5DA994">void</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></code></span>refine</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">array</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">, </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">, </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">>) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[], </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[]></span></code></span>array</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">schema</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">,</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">></span></code></span>schema</span></span><span style="color:#666666">), (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">[]</span></code></span>value</span></span><span style="color:#666666">, </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">[],</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">[]></span></code></span>s</span></span><span style="color:#666666">) => {</span></span>
<span class="line"><span style="color:#CB7676">        const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">names</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>names</span></span><span style="color:#666666"> =</span><span style="color:#CB7676"> new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">Set</span><span style="color:#666666">: </span><span style="color:#5DA994">SetConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>(</span><span style="color:#BD976A">iterable</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">Iterable</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">> | </span><span style="color:#CB7676">null</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>Set</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">[]</span></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">Array</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">>.</span><span style="color:#80A665">map</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>(</span><span style="color:#BD976A">callbackfn</span><span style="color:#DBD7CAEE">: </span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">,</span><span style="color:#BD976A"> index</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">,</span><span style="color:#BD976A"> array</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">[])</span><span style="color:#666666"> =></span><span style="color:#BD976A"> string</span><span style="color:#666666">,</span><span style="color:#BD976A"> thisArg</span><span style="color:#CB7676">?:</span><span style="color:#BD976A"> any</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span><span style="color:#666666">[]</span></code><div class="twoslash-popup-docs">Calls a defined callback function on each element of an array, and returns an array that contains the results.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.</span></span></div></span>map</span></span><span style="color:#666666">((</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">f</span><span style="color:#666666">:</span><span style="color:#BD976A"> FileSystem</span></code></span>f</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">f</span><span style="color:#666666">:</span><span style="color:#BD976A"> FileSystem</span></code></span>f</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">name</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>name</span></span><span style="color:#666666">));</span></span>
<span class="line"><span style="color:#4D9375">        if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">names</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>names</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">>.</span><span style="color:#BD976A">size</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@returns</span><span class="twoslash-popup-docs-tag-value">the number of (unique) elements in Set.</span></span></div></span>size</span></span><span style="color:#CB7676"> !==</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">[]</span></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">Array</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">>.</span><span style="color:#B8A965">length</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs">Gets or sets the length of the array. This is a number one higher than the highest index in the array.</div></span>length</span></span><span style="color:#666666">) {</span></span>
<span class="line"><span style="color:#4D9375">          throw</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">[],</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">[]></span></code></span>s</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fail</span><span style="color:#666666">:</span><span style="color:#666666"> (</span><span style="color:#BD976A">message</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> never</span></code></span>fail</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">Expected unique names in the children</span><span style="color:#C98A7D99">'</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#666666">        }</span></span>
<span class="line"><span style="color:#666666">      }),</span></span>
<span class="line"><span style="color:#758575DD">      // no composability; have to repeat</span></span>
<span class="line"><span style="color:#B8A965">      </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">name</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>name</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonEmptyStringSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>nonEmptyStringSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">    }),</span></span>
<span class="line"><span style="color:#BD976A">    </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">shape</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">      </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> literal</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">7</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code></span>literal</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">file</span><span style="color:#C98A7D99">'</span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#758575DD">      // no composability; have to repeat</span></span>
<span class="line"><span style="color:#B8A965">      </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">name</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>name</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonEmptyStringSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>nonEmptyStringSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">    }),</span></span>
<span class="line"><span style="color:#666666">  ])</span></span>
<span class="line"><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">uniqArraySchema</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">T</span><span style="color:#666666">[]></span></code></span>uniqArraySchema</span></span><span style="color:#666666"> =</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> T</span><span style="color:#666666">[]></span></code></span>T</span></span><span style="color:#666666">>(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">schema</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> T</span><span style="color:#666666">></span></code></span>schema</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">,</span><span style="color:#5DA994"> Input</span><span style="color:#666666"> =</span><span style="color:#5DA994"> Output</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    parse</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    parseAsync</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Promise</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>>;</span></span>
<span class="line"><span style="color:#80A665">    parseOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Output</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serialize</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    serializeOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serializeToJsonOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Json</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    assert</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#666666"> asserts</span><span style="color:#BD976A"> data</span><span style="color:#CB7676"> is</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Schema</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> T</span><span style="color:#666666">[]></span></code></span>T</span></span><span style="color:#666666">>)</span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> refine</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> T</span><span style="color:#666666">[]>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">T</span><span style="color:#666666">[]>,</span><span style="color:#80A665"> refiner</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">T</span><span style="color:#666666">[]>) => </span><span style="color:#5DA994">void</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> T</span><span style="color:#666666">[]></span></code></span>refine</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">array</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">T</span><span style="color:#666666">[]></span></code></span>array</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">schema</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> T</span><span style="color:#666666">></span></code></span>schema</span></span><span style="color:#666666">),</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>value</span></span><span style="color:#666666">,</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">[],</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]></span></code></span>s</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#CB7676">    const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">set</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">></span></code></span>set</span></span><span style="color:#666666"> =</span><span style="color:#CB7676"> new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">Set</span><span style="color:#666666">: </span><span style="color:#5DA994">SetConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">iterable</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">Iterable</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">> | </span><span style="color:#CB7676">null</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>Set</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>value</span></span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#4D9375">    if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">set</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">></span></code></span>set</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">>.</span><span style="color:#BD976A">size</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@returns</span><span class="twoslash-popup-docs-tag-value">the number of (unique) elements in Set.</span></span></div></span>size</span></span><span style="color:#CB7676"> !== </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>value</span></span><span style="color:#666666">.</span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">Array</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">>.</span><span style="color:#B8A965">length</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">number</span></code><div class="twoslash-popup-docs">Gets or sets the length of the array. This is a number one higher than the highest index in the array.</div></span>length</span></span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">      throw</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">s</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">[],</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]></span></code></span>s</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fail</span><span style="color:#666666">:</span><span style="color:#666666"> (</span><span style="color:#BD976A">message</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> never</span></code></span>fail</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">Expected unique items</span><span style="color:#C98A7D99">'</span><span style="color:#666666">);</span></span>
<span class="line"><span style="color:#666666">    }</span></span>
<span class="line"><span style="color:#666666">  });</span></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">setSchema</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>, </span><span style="color:#5DA994">T</span><span style="color:#666666">[]></span></code></span>setSchema</span></span><span style="color:#666666"> =</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>,</span><span style="color:#5DA994"> T</span><span style="color:#666666">[]></span></code></span>T</span></span><span style="color:#666666">>(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">schema</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> T</span><span style="color:#666666">></span></code></span>schema</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">,</span><span style="color:#5DA994"> Input</span><span style="color:#666666"> =</span><span style="color:#5DA994"> Output</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    parse</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    parseAsync</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Promise</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Output</span><span style="color:#666666">>>;</span></span>
<span class="line"><span style="color:#80A665">    parseOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> Output</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serialize</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    serializeOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    serializeToJsonOrThrow</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Output</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Json</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    assert</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#666666"> asserts</span><span style="color:#BD976A"> data</span><span style="color:#CB7676"> is</span><span style="color:#5DA994"> Input</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Schema</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>,</span><span style="color:#5DA994"> T</span><span style="color:#666666">[]></span></code></span>T</span></span><span style="color:#666666">>)</span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> transform</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> T</span><span style="color:#666666">[],</span><span style="color:#5DA994"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">T</span><span style="color:#666666">[]>,</span><span style="color:#80A665"> parser</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>) => </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">,</span><span style="color:#80A665"> serializer</span><span style="color:#666666">: (</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>, </span><span style="color:#BD976A">s</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">EffectCtx</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>) => </span><span style="color:#5DA994">T</span><span style="color:#666666">[]):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></code></span>transform</span></span><span style="color:#666666">(</span></span>
<span class="line"><span style="color:#80A665">    </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">uniqArraySchema</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">>) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">[], </span><span style="color:#5DA994">T</span><span style="color:#666666">[]></span></code></span>uniqArraySchema</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">schema</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">,</span><span style="color:#BD976A"> T</span><span style="color:#666666">></span></code></span>schema</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#758575DD">    // TODO can the uniqueness be checked here?</span></span>
<span class="line"><span style="color:#666666">    (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">a</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>a</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#CB7676"> new </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">var </span><span style="color:#BD976A">Set</span><span style="color:#666666">: </span><span style="color:#5DA994">SetConstructor</span></span>
<span class="line"><span style="color:#CB7676">new</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">iterable</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">Iterable</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">> | </span><span style="color:#CB7676">null</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#80A665"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">1</span><span style="color:#BD976A"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>Set</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">a</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">[]</span></code></span>a</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#666666">    (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">a</span><span style="color:#666666">:</span><span style="color:#BD976A"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">></span></code></span>a</span></span><span style="color:#666666">)</span><span style="color:#666666"> =></span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">var </span><span style="color:#BD976A">Array</span><span style="color:#666666">: </span><span style="color:#5DA994">ArrayConstructor</span></code></span>Array</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">ArrayConstructor</span><span style="color:#666666">.</span><span style="color:#80A665">from</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">iterable</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">Iterable</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">></span><span style="color:#CB7676"> |</span><span style="color:#BD976A"> ArrayLike</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">>)</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">T</span><span style="color:#666666">[]</span><span style="color:#666666"> (</span><span style="color:#CB7676">+</span><span style="color:#4C9A91">3</span><span style="color:#BD976A"> overloads</span><span style="color:#666666">)</span></code><div class="twoslash-popup-docs">Creates an array from an iterable object.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">iterable An iterable object to convert to an array.</span></span></div></span>from</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">a</span><span style="color:#666666">:</span><span style="color:#BD976A"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">></span></code></span>a</span></span><span style="color:#666666">)</span></span>
<span class="line"><span style="color:#666666">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">userSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">} &#x26; {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, </span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;...>></span></span></code></pre></code></span>userSchema</span></span><span style="color:#666666"> =</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> merge</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">schema1</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>,</span><span style="color:#BD976A"> schema2</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></span></code></pre></code></span>merge</span></span><span style="color:#666666">(</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">timeConcernSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>timeConcernSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#BD976A">  </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">shape</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">    ...;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">name</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>name</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonEmptyStringSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>nonEmptyStringSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">email</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>email</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">email</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>, </span><span style="color:#BD976A">message</span><span style="color:#CB7676">?</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666"> | </span><span style="color:#CB7676">undefined</span><span style="color:#666666">) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>email</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonEmptyStringSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>nonEmptyStringSchema</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">subscription</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>subscription</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">subscriptionSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>subscriptionSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">stripeId</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">,</span><span style="color:#BD976A"> string</span><span style="color:#666666">></span></code></span>stripeId</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">stripeIdSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>stripeIdSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">visits</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#BD976A"> number</span><span style="color:#666666">></span></code></span>visits</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonNegativeIntegerSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">></span></code></span>nonNegativeIntegerSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">favouriteColours</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">>,</span><span style="color:#BD976A"> string</span><span style="color:#666666">[]></span></code></span>favouriteColours</span></span><span style="color:#666666">: </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">setSchema</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>(</span><span style="color:#BD976A">schema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">>) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>, </span><span style="color:#5DA994">string</span><span style="color:#666666">[]></span></code></span>setSchema</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">colourSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">string</span><span style="color:#666666">></span></code></span>colourSchema</span></span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">profile</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#80A665">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">},</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>profile</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665">union</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>, [</span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>]>(</span><span style="color:#BD976A">schemas</span><span style="color:#666666">: [...]) => </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;...></span></span></code></pre></code></span>union</span></span><span style="color:#666666">([</span></span>
<span class="line"><span style="color:#BD976A">      </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">shape</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    boughtTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">        </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> literal</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">7</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code></span>literal</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">listener</span><span style="color:#C98A7D99">'</span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">        </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">boughtTracks</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#BD976A"> number</span><span style="color:#666666">></span></code></span>boughtTracks</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonNegativeIntegerSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">></span></code></span>nonNegativeIntegerSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">      }),</span></span>
<span class="line"><span style="color:#BD976A">      </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> object</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">shape</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    type</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">, </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    publishedTracks</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">1</span><span style="color:#5DA994"> overload</span><span style="color:#666666">)</span></span></code></pre></code></span>object</span></span><span style="color:#666666">({</span></span>
<span class="line"><span style="color:#B8A965">        </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">type</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span></code></span>type</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#80A665"> literal</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">>(</span><span style="color:#BD976A">value</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">,</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">"</span><span style="color:#666666">></span><span style="color:#666666"> (</span><span style="color:#DBD7CAEE">+</span><span style="color:#4C9A91">7</span><span style="color:#5DA994"> overloads</span><span style="color:#666666">)</span></code></span>literal</span></span><span style="color:#666666">(</span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">artist</span><span style="color:#C98A7D99">'</span><span style="color:#666666">),</span></span>
<span class="line"><span style="color:#B8A965">        </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">publishedTracks</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">number</span><span style="color:#666666">,</span><span style="color:#BD976A"> number</span><span style="color:#666666">></span></code></span>publishedTracks</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">nonNegativeIntegerSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">number</span><span style="color:#666666">, </span><span style="color:#5DA994">number</span><span style="color:#666666">></span></code></span>nonNegativeIntegerSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">      }),</span></span>
<span class="line"><span style="color:#666666">    ]),</span></span>
<span class="line"><span style="color:#B8A965">    </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">fileSystem</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">FileSystem</span><span style="color:#666666">,</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">></span></code></span>fileSystem</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#BD976A">fileSystemSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">, </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">></span></code></span>fileSystemSchema</span></span><span style="color:#666666">,</span></span>
<span class="line"><span style="color:#666666">  })</span></span>
<span class="line"><span style="color:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> User</span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>User</span></span><span style="color:#666666"> =</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Output</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#5DA994"> T</span><span style="color:#CB7676"> extends</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;</span><span style="color:#CB7676">infer</span><span style="color:#5DA994"> Output</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">></span><span style="color:#CB7676"> ?</span><span style="color:#5DA994"> Output</span><span style="color:#CB7676"> :</span><span style="color:#5DA994"> never</span></code></span>Output</span></span><span style="color:#666666">&#x3C;</span><span style="color:#CB7676">typeof</span><span style="color:#BD976A"> </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">userSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">} &#x26; {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, </span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;...>></span></span></code></pre></code></span>userSchema</span></span><span style="color:#666666">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375">export</span><span style="color:#CB7676"> const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">decodeUser</span><span style="color:#666666">: (</span><span style="color:#BD976A">u</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">) => </span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#5DA994">User</span><span style="color:#666666">></span></code></span>decodeUser</span></span><span style="color:#666666"> =</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">u</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span></code></span>u</span></span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">E</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">E</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">,</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> User</span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>User</span></span><span style="color:#666666">></span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#80A665">  </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665">mapResult</span><span style="color:#666666">: &#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">} &#x26; {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}>(</span><span style="color:#BD976A">r</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;...>) => </span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;...></span></span></code></pre></code></span>mapResult</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">userSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">} &#x26; {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, </span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;...>></span></span></code></pre></code></span>userSchema</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> parse</span><span style="color:#666666">(</span><span style="color:#BD976A">data</span><span style="color:#666666">: </span><span style="color:#5DA994">unknown</span><span style="color:#666666">):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;...>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}></span></span></code></pre></code></span>parse</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">u</span><span style="color:#666666">:</span><span style="color:#BD976A"> unknown</span></code></span>u</span></span><span style="color:#666666">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375">export</span><span style="color:#CB7676"> const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">encodeUser</span><span style="color:#666666">: (</span><span style="color:#BD976A">u</span><span style="color:#666666">: </span><span style="color:#5DA994">User</span><span style="color:#666666">) => </span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">></span></code></span>encodeUser</span></span><span style="color:#666666"> =</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">u</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#CB7676"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    name</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    email</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    subscription</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    stripeId</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    visits</span><span style="color:#666666">:</span><span style="color:#BD976A"> number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    favouriteColours</span><span style="color:#666666">:</span><span style="color:#BD976A"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    profile</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    }</span><span style="color:#CB7676"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#80A665">    fileSystem</span><span style="color:#666666">:</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>u</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> User</span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>User</span></span><span style="color:#666666">):</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">E</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">E</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">unknown</span><span style="color:#666666">,</span><span style="color:#5DA994"> unknown</span><span style="color:#666666">></span><span style="color:#666666"> =></span></span>
<span class="line"><span style="color:#80A665">  </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">mapResult</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>>(</span><span style="color:#BD976A">r</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>>) => </span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">unknown</span><span style="color:#666666">>></span></code></span>mapResult</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">const </span><span style="color:#BD976A">userSchema</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Schema</span><span style="color:#666666">&#x3C;{</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">} &#x26; {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}, </span><span style="color:#5DA994">Record</span><span style="color:#666666">&#x3C;...>></span></span></code></pre></code></span>userSchema</span></span><span style="color:#666666">.</span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">function</span><span style="color:#80A665"> serialize</span><span style="color:#666666">(</span><span style="color:#BD976A">value</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#BD976A">    createdAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    updatedAt</span><span style="color:#666666">: </span><span style="color:#5DA994">Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">} &#x26; {</span></span>
<span class="line"><span style="color:#BD976A">    name</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    email</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    subscription</span><span style="color:#666666">: </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#666666"> | </span><span style="color:#C98A7D99">"</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    stripeId</span><span style="color:#666666">: </span><span style="color:#5DA994">string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    visits</span><span style="color:#666666">: </span><span style="color:#5DA994">number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    favouriteColours</span><span style="color:#666666">: </span><span style="color:#5DA994">Set</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#BD976A">    profile</span><span style="color:#666666">: {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    } | {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#BD976A">    fileSystem</span><span style="color:#666666">: </span><span style="color:#5DA994">FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}):</span><span style="color:#5DA994"> S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#DBD7CAEE">...</span><span style="color:#666666">></span></span></code></pre></code></span>serialize</span></span><span style="color:#666666">(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">u</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    createdAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    updatedAt</span><span style="color:#666666">:</span><span style="color:#BD976A"> Date</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#CB7676"> &#x26;</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    name</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    email</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    subscription</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">free</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">pro</span><span style="color:#C98A7D99">"</span><span style="color:#CB7676"> |</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">enterprise</span><span style="color:#C98A7D99">"</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    stripeId</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    visits</span><span style="color:#666666">:</span><span style="color:#BD976A"> number</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    favouriteColours</span><span style="color:#666666">:</span><span style="color:#BD976A"> Set</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">string</span><span style="color:#666666">>;</span></span>
<span class="line"><span style="color:#80A665">    profile</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    }</span><span style="color:#CB7676"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#666666">        ...;</span></span>
<span class="line"><span style="color:#666666">    };</span></span>
<span class="line"><span style="color:#80A665">    fileSystem</span><span style="color:#666666">:</span><span style="color:#BD976A"> FileSystem</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>u</span></span><span style="color:#666666">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676">const </span><span style="color:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">const </span><span style="color:#80A665">mapResult</span><span style="color:#666666">: &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">r</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>) => </span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">, </span><span style="color:#5DA994">T</span><span style="color:#666666">></span></code></span>mapResult</span></span><span style="color:#666666"> =</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">r</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span></code></span>T</span></span><span style="color:#666666">>(</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">r</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">></span></code></span>r</span></span><span style="color:#666666">: </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4D9375">import</span><span style="color:#BD976A"> S</span></code></span>S</span></span><span style="color:#666666">.</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">Value</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    success</span><span style="color:#666666">: </span><span style="color:#CB7676">true</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">Value</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    success</span><span style="color:#666666">: </span><span style="color:#CB7676">false</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">S_error</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span>
<span class="line"><span style="color:#4D9375">export</span><span style="color:#BD976A"> Result</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">r</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span></code></span>T</span></span><span style="color:#666666">>):</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#CB7676">type</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">E</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span><span style="color:#666666"> =</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    error</span><span style="color:#666666">: </span><span style="color:#5DA994">E</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span><span style="color:#666666"> |</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#BD976A">    _tag</span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#BD976A">    value</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>Result</span></span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> </span><span style="color:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#CB7676">function</span><span style="color:#666666"> (</span><span style="color:#BD976A">type</span><span style="color:#BD976A"> parameter</span><span style="color:#666666">)</span><span style="color:#80A665"> T</span><span style="color:#80A665"> in</span><span style="color:#666666"> &#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>(</span><span style="color:#BD976A">r</span><span style="color:#666666">: </span><span style="color:#5DA994">S</span><span style="color:#666666">.</span><span style="color:#5DA994">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">T</span><span style="color:#666666">>):</span><span style="color:#5DA994"> Result</span><span style="color:#666666">&#x3C;</span><span style="color:#5DA994">string</span><span style="color:#666666">,</span><span style="color:#5DA994"> T</span><span style="color:#666666">></span></code></span>T</span></span><span style="color:#666666">></span><span style="color:#666666"> =></span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">  if</span><span style="color:#666666"> (</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">r</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Result</span><span style="color:#666666">&#x3C;</span><span style="color:#BD976A">T</span><span style="color:#666666">></span></code></span>r</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">success</span><span style="color:#666666">:</span><span style="color:#BD976A"> boolean</span></code></span>success</span></span><span style="color:#666666">)</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#666666"> { </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">_tag</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">"</span></code></span>_tag</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">right</span><span style="color:#C98A7D99">'</span><span style="color:#666666">, </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span></code></span>value</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">r</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    success</span><span style="color:#666666">:</span><span style="color:#4D9375"> true</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    value</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>r</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">value</span><span style="color:#666666">:</span><span style="color:#BD976A"> T</span></code></span>value</span></span><span style="color:#666666"> };</span></span>
<span class="line"><span style="color:#666666">  }</span><span style="color:#4D9375"> else</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#4D9375">    return</span><span style="color:#666666"> { </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">_tag</span><span style="color:#666666">:</span><span style="color:#C98A7D99"> "</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">"</span></code></span>_tag</span></span><span style="color:#666666">: </span><span style="color:#C98A7D99">'</span><span style="color:#C98A7D">left</span><span style="color:#C98A7D99">'</span><span style="color:#666666">, </span><span style="color:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">error</span><span style="color:#666666">:</span><span style="color:#BD976A"> string</span></code></span>error</span></span><span style="color:#666666">: </span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki vitesse-dark" style="background-color:#121212;color:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#80A665">r</span><span style="color:#666666">:</span><span style="color:#666666"> {</span></span>
<span class="line"><span style="color:#80A665">    success</span><span style="color:#666666">:</span><span style="color:#4D9375"> false</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#80A665">    error</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Error</span><span style="color:#666666">;</span></span>
<span class="line"><span style="color:#666666">}</span></span></code></pre></code></span>r</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#80A665">error</span><span style="color:#666666">:</span><span style="color:#BD976A"> S</span><span style="color:#666666">.</span><span style="color:#BD976A">Error</span></code></span>error</span></span><span style="color:#666666">.</span><span style="color:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#BD976A">S_error</span><span style="color:#666666">.</span><span style="color:#BD976A">message</span><span style="color:#DBD7CAEE">: </span><span style="color:#BD976A">string</span></code></span>message</span></span><span style="color:#666666"> };</span></span>
<span class="line"><span style="color:#666666">  }</span></span>
<span class="line"><span style="color:#666666">};</span></span>
<span class="line"></span></code></pre>`,y=({isIframe:a})=>s.jsx("div",{children:s.jsx(n,{isIframe:a,code:c,encodeUser:p,decodeUser:o,validUser:l,meta:e,library:"rescript-schema"})});export{y as RescriptSchemaPage};
